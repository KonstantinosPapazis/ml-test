# AWS Configuration
aws_region   = "us-east-1"
project_name = "my-ml-project"
environment  = "dev"

# SageMaker Notebook Configuration
notebook_name         = "my-ml-notebook"  # Optional, will be auto-generated if not provided
instance_type         = "ml.t3.medium"    # Options: ml.t2.medium, ml.t3.medium, ml.m5.xlarge, etc.
volume_size           = 10                # GB, minimum 5
platform_identifier   = "notebook-al2-v2" # Options: notebook-al2-v2, notebook-al1-v1
root_access           = "Disabled"        # Options: Enabled, Disabled
direct_internet_access = "Disabled"       # Set to Disabled for private subnets

# Network Configuration (REQUIRED)
vpc_id         = "vpc-12345678"
subnet_id      = "subnet-12345678"  # Use a private subnet (SageMaker notebooks only support single subnet)
vpc_cidr_block = "10.0.0.0/16"      # Your VPC CIDR

# VPC Endpoints Configuration (Optional but recommended for HA)
# Deploy VPC endpoints across multiple subnets for high availability
vpc_endpoint_subnet_ids = [
  "subnet-12345678",  # us-east-1a (same as notebook)
  "subnet-23456789",  # us-east-1b (different AZ)
  "subnet-34567890"   # us-east-1c (another AZ)
]

# Security Group Configuration
create_security_group      = true
security_group_name        = null  # Optional, will be auto-generated if not provided

# CIDR blocks allowed to access the notebook (e.g., your VPC CIDR for internal access)
allowed_cidr_blocks = ["10.0.0.0/16"]

# Additional security groups allowed to access the notebook
allowed_security_group_ids = []

# Additional security groups to attach (if you have existing ones)
additional_security_group_ids = []

# VPC Endpoints (recommended for private subnets)
enable_s3_vpc_endpoint                  = true
enable_sagemaker_api_vpc_endpoint       = true
enable_sagemaker_runtime_vpc_endpoint   = true

# IAM Configuration
create_iam_role               = true
iam_role_name                 = null  # Optional, will be auto-generated if not provided
iam_role_permissions_boundary = null  # ARN of permissions boundary if required

# S3 Buckets the notebook needs access to
s3_bucket_arns = [
  "arn:aws:s3:::my-ml-data-bucket",
  "arn:aws:s3:::my-ml-models-bucket"
]

# ECR Repositories for Docker image push/pull
ecr_repository_arns = null  # null = all ECR repos in your account
# ecr_repository_arns = [
#   "arn:aws:ecr:us-east-1:123456789012:repository/my-ml-app",
#   "arn:aws:ecr:us-east-1:123456789012:repository/my-training-image"
# ]

# Additional IAM policies to attach
additional_iam_policies = [
  # "arn:aws:iam::aws:policy/AmazonSageMakerFullAccess"
]

# Git Access Configuration
enable_git_access = true  # Enable Git/CodeCommit access
enable_git_ssh    = false # Enable SSH for Git (usually HTTPS is sufficient)

# Specific CodeCommit repositories (optional, null = all repos)
codecommit_repository_arns = null
# codecommit_repository_arns = [
#   "arn:aws:codecommit:us-east-1:123456789012:my-repo"
# ]

# Secrets Manager for Git credentials (optional, null = auto-detect *git* secrets)
enable_secrets_manager_access = true
secrets_manager_secret_arns   = null
# secrets_manager_secret_arns = [
#   "arn:aws:secretsmanager:us-east-1:123456789012:secret:github-token-xxx"
# ]

# Encryption (optional)
kms_key_id = null  # ARN of KMS key for EBS volume encryption

# Lifecycle Configuration (optional)
create_lifecycle_config = false
lifecycle_config_name   = null

# Example lifecycle scripts (must be base64 encoded):
# lifecycle_config_on_create = base64encode(<<-EOF
#   #!/bin/bash
#   set -e
#   # Install additional packages
#   sudo yum update -y
#   sudo yum install -y htop
# EOF
# )

# lifecycle_config_on_start = base64encode(<<-EOF
#   #!/bin/bash
#   set -e
#   # Run on every notebook start
#   echo "Notebook started at $(date)"
# EOF
# )

# Code Repository (optional)
default_code_repository      = null  # Git repository URL
additional_code_repositories = []

# CloudWatch Logs
enable_cloudwatch_logs           = true
cloudwatch_logs_retention_days   = 30

# Instance Metadata Service
instance_metadata_service_configuration = {
  minimum_instance_metadata_service_version = "2"  # Use IMDSv2
}

# Tags
default_tags = {
  Project     = "ML Project"
  ManagedBy   = "Terraform"
  Owner       = "Data Science Team"
  CostCenter  = "ML-001"
}

notebook_tags = {
  Purpose = "Machine Learning Development"
}

security_group_tags = {
  Type = "SageMaker Notebook Security Group"
}

iam_role_tags = {
  Type = "SageMaker Notebook IAM Role"
}

